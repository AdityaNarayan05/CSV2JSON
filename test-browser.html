<!doctype html>
<html lang="en">

<head>
  <title>CSVJSON's csv2json Test</title>
</head>

<body>
  <h1>CSVJSON's csv2json Test</h1>

  <h2>Test</h2>
  <pre>const csv = `name.firstName, name.lastName, age, address.line1, address.line2, address.city, address.state, gender 
Rohit, Prasad, 35, A-563 Rakshak Society, New Pune Road, Pune, Maharashtra, male`;

const json = CSVJSON.csv2json(csv, {parseNumbers: true});
  </pre>
  
  <h2>Expected</h2>
  <pre id="expected">
    [
      {
        "name": {
          "firstName": "Rohit", 
          "lastName": "Prasad"
        },
        "age": "35",
        "address" : {
          "line1": "A-563 Rakshak Society",
          "line2": "New Pune Road",
          "city": "Pune",
          "state": "Maharashtra"
        },
        "gender": "male"
      }
    ]
  </pre>

  <h2>Execution</h2>
  <pre id="execution"></pre>

  <h2>Test Result</h2>
  <p id="result"></p>

  <script type="text/javascript" src="csv2json.js"></script>
  <script>
    (function () {
      const csv = `name.firstName, name.lastName, age, address.line1, address.line2, address.city, address.state, gender 
        Rohit, Prasad, 35, A-563 Rakshak Society, New Pune Road, Pune, Maharashtra, male`;
      const json = CSVJSON.csv2json(csv, { parseNumbers: true });
      const expected = JSON.parse(document.getElementById('expected').innerText);

      const execution = document.getElementById('execution');
      const result = document.getElementById('result');
      execution.innerText = JSON.stringify(json, null, 2);
      if (JSON.stringify(json) == JSON.stringify(expected)) {
        result.innerText = 'Success!';
      } else {
        result.innerText = 'Failed.';
      }
    }.call(this));
  </script>
</body>

</html>